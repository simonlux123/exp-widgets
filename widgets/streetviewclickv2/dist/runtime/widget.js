/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-arcgis","jimu-core/react"],(function(e,t){var i={},r={},o={};return{setters:[function(e){i.React=e.React},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){o.createElement=e.createElement,o.forwardRef=e.forwardRef}],execute:function(){e((()=>{var e={686:e=>{"use strict";e.exports=r},244:e=>{"use strict";e.exports=i},972:e=>{"use strict";e.exports=o}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var s={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(s),n.d(s,{__set_webpack_public_path__:()=>w,default:()=>p});var e=n(244),t=n(686),i=n(972);const r=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,i)=>i?i.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter(((e,t,i)=>Boolean(e)&&""!==e.trim()&&i.indexOf(e)===t)).join(" ").trim(),a=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,i.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:l,iconNode:d,...u},p)=>(0,i.createElement)("svg",{ref:p,...c,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:o("lucide",s),...!l&&!a(u)&&{"aria-hidden":"true"},...u},[...d.map((([e,t])=>(0,i.createElement)(e,t))),...Array.isArray(l)?l:[l]]))),d=((e,t)=>{const n=(0,i.forwardRef)((({className:n,...s},a)=>{return(0,i.createElement)(l,{ref:a,iconNode:t,className:o(`lucide-${c=r(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...s});var c}));return n.displayName=r(e),n})("person-standing",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]]);!function(){var e;const t=document.getElementsByTagName("script");let i;for(let e=t.length-1;e>=0;e--){const r=t[e].src||"";if(r.match(/\/widgets\/streetviewclick\/.*\/runtime\/widget\.js(\?.*)?$/)){i=r.replace(/widget\.js(\?.*)?$/,"");break}}const r=(null===(e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===e?void 0:e.baseUrl)||"",o=i&&r&&new URL(i).origin===new URL(r,location.href).origin;n.p=o?r+"widgets/streetviewclick/dist/runtime/":i||n.p}();const u=new WeakMap;class p extends e.React.PureComponent{constructor(e){super(e),this.jimuMapView=null,this.clickHandle=null,this.toggleStreetView=()=>{this.setState((e=>({isStreetViewActive:!e.isStreetViewActive})),(()=>this.state.isStreetViewActive?this.activateStreetView():this.deactivateStreetView()))},this.activateStreetView=()=>{var e;const t=null===(e=this.jimuMapView)||void 0===e?void 0:e.view;if(!t)return;const i=u.get(t);i&&i!==this&&i.deactivateStreetView(),this.clickHandle||(this.clickHandle=t.on("click",this.handleMapClick),t.container.style.cursor="crosshair",u.set(t,this))},this.deactivateStreetView=()=>{var e;const t=null===(e=this.jimuMapView)||void 0===e?void 0:e.view;this.clickHandle&&(this.clickHandle.remove(),this.clickHandle=null),t&&(t.container.style.cursor="default",u.get(t)===this&&u.delete(t))},this.handleMapClick=e=>{const{latitude:t,longitude:i}=e.mapPoint,r=`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${encodeURIComponent(`${t},${i}`)}`;window.open(r,"_blank","noopener")},this.onActiveViewChange=e=>{this.jimuMapView=e,this.state.isStreetViewActive&&this.activateStreetView()},this.state={isStreetViewActive:!1}}componentWillUnmount(){this.deactivateStreetView()}render(){const{useMapWidgetId:i}=this.props.config,{isStreetViewActive:r}=this.state,o={padding:"8px 12px",backgroundColor:r?"#228B22":"#CE2029",color:"white",border:"#000000 2px solid",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginBottom:"10px"};return e.React.createElement("div",{className:"widget-streetviewclick",style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.React.createElement("button",{style:o,title:"Toggle Street View click mode",onClick:this.toggleStreetView},e.React.createElement(d,{size:30,color:"white"})),e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:i,onActiveViewChange:this.onActiveViewChange}))}}function w(e){n.p=e}})(),s})())}}}));